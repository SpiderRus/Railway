<!doctype html>
<html xmlns="http://www.w3.org/1999/html" lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WiFi configuration</title>

<!--    <link href="bootstrap/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">-->
<!--    <script src="bootstrap/bootstrap.min.js" crossorigin="anonymous"></script>-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <script>
        async function load() {
            let response = await fetch('/wifi/configuration', { method: 'GET' });

            if (response.ok) {
                let config = await response.json();

                document.getElementById('hostname').value = config.hostname;
                document.getElementById('ap.ssid').value = config.ap.ssid;
                document.getElementById('ap.password').value = config.ap.password;
                document.getElementById('selfap.ssid').value = config.selfap.ssid;
                document.getElementById('selfap.password').value = config.selfap.password;
            }
            else
                window.alert("Load data error: " + await response.text());
        }

        window.onload = function() {
            load().then();
        };

    </script>
</head>
<body>
    <div style="display: flex; justify-content: center">
    <form action="/wifi/configuration" method="POST" class="row g-3" id="wifi-config">
        <table>
            <tr>
                <td style="width: 11.7em"><label for="hostname" class="input-group-text">Hostname:</label></td>
                <td><input form="wifi-config" name="hostname" type="text" maxlength="20" class="form-control" id="hostname"></td>
            </tr>

            <tr><td style="padding-top: 1em; font-weight: bold" colspan="2">WiFi AP</td></tr>
            <tr>
                <td style="padding-bottom: 0.2em"><label for="ap.ssid" class="input-group-text">SSID:</label></td>
                <td style="padding-bottom: 0.2em"><input form="wifi-config" name="ap.ssid" type="text" maxlength="20" class="form-control" id="ap.ssid"></td>
            </tr>
            <tr>
                <td style="padding-bottom: 0.2em"><label for="ap.password" class="input-group-text">Password:</label></td>
                <td><input form="wifi-config" name="ap.password" type="text" maxlength="20" class="form-control" id="ap.password"></td>
            </tr>

            <tr><td style="padding-top: 1em; font-weight: bold" colspan="2">WiFi self AP</td></tr>
            <tr>
                <td style="padding-bottom: 0.2em"><label for="selfap.ssid" class="input-group-text">SSID:</label></td>
                <td style="padding-bottom: 0.2em"><input form="wifi-config" name="selfap.ssid" type="text" maxlength="20" class="form-control" id="selfap.ssid"></td>
            </tr>
            <tr>
                <td style="padding-bottom: 0.2em"><label for="selfap.password" class="input-group-text">Password:</label></td>
                <td><input form="wifi-config" name="selfap.password" type="text" maxlength="20" class="form-control" id="selfap.password"></td>
            </tr>

            <tr>
                <td style="padding-top: 1em; text-align: right" colspan="2"><button type="submit" class="btn btn-primary">Submit</button></td>
            </tr>
        </table>
    </form></div>
</body>
</html>
